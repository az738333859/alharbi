<!DOCTYPE html>
<html lang="ar">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ù„Ø¹Ø¨ØªÙŠ Ø§Ù„Ø£ÙˆÙ„Ù‰</title>
    <link rel="stylesheet" href="styles.css">
    <style>
        body {
            font-family: Arial, sans-serif;
            background: linear-gradient(45deg, #6ab1d7, #33d9b2);
            background-size: 200% 200%;
            animation: gradientAnimation 10s ease infinite;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100vh;
            margin: 0;
            color: #333;
        }

        @keyframes gradientAnimation {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            color: #fff;
            text-shadow: 1px 1px 5px #000;
        }

        p {
            font-size: 1.2em;
            margin-bottom: 10px;
            color: #fff;
        }

        #startButton, #restartButton, #mainMenuButton, #achievementsButton {
            padding: 10px 20px;
            font-size: 1em;
            color: white;
            background-color: #4a90e2;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            transition: background-color 0.3s ease;
            margin: 5px;
        }

        #startButton:hover, #restartButton:hover, #mainMenuButton:hover, #achievementsButton:hover {
            background-color: #357abd;
        }

        #gameArea, #gameOverScreen, #achievementsScreen {
            display: none;
            background-color: rgba(255, 255, 255, 0.9);
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
            width: 300px;
            text-align: center;
            transition: transform 0.3s ease;
        }

        input[type="text"] {
            padding: 10px;
            font-size: 1em;
            margin-bottom: 10px;
            border: 2px solid #ddd;
            border-radius: 5px;
            width: calc(100% - 22px);
            box-sizing: border-box;
        }

        button {
            padding: 10px 15px;
            font-size: 1em;
            color: white;
            background-color: #4a90e2;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            transition: background-color 0.3s ease, transform 0.2s ease;
        }

        button:hover {
            background-color: #357abd;
            transform: scale(1.05);
        }

        #gameArea.correct {
            transform: scale(1.1);
            background-color: #d4edda;
        }

        #gameArea.wrong {
            transform: scale(0.9);
            background-color: #f8d7da;
        }

        #musicControl {
            position: fixed;
            top: 10px;
            right: 10px;
            background: rgba(255, 255, 255, 0.8);
            padding: 5px;
            border-radius: 50%;
            cursor: pointer;
            box-shadow: 0 0 5px rgba(0, 0, 0, 0.3);
        }
    </style>
</head>
<body>
    <h1>Ù…Ø±Ø­Ø¨Ù‹Ø§ Ø¨Ùƒ ÙÙŠ Ù„Ø¹Ø¨ØªÙŠ Ø§Ù„Ø£ÙˆÙ„Ù‰!</h1>
    <p>Ø§Ø¶ØºØ· Ø¹Ù„Ù‰ Ø§Ù„Ø²Ø± Ù„ØªØ¨Ø¯Ø£ Ø§Ù„Ù…ØºØ§Ù…Ø±Ø©!</p>
    <p>Ø£ÙØ¶Ù„ Ù†ØªÙŠØ¬Ø©: <span id="bestScore">0</span></p>
    <button id="startButton">Ø§Ø¨Ø¯Ø£ Ø§Ù„Ù„Ø¹Ø¨</button>
    <button id="achievementsButton">Ø¹Ø±Ø¶ Ø§Ù„Ø¥Ù†Ø¬Ø§Ø²Ø§Øª</button>

    <div id="gameArea">
        <p>Ø§Ù„Ù„Ø¹Ø¨Ø© Ø¨Ø¯Ø£Øª! Ø­Ø§ÙˆÙ„ ØªØ­Ù‚ÙŠÙ‚ Ø£Ø¹Ù„Ù‰ Ø§Ù„Ù†Ù‚Ø§Ø·!</p>
        <p>Ù†Ù‚Ø§Ø·Ùƒ: <span id="score">0</span></p>
        <p>Ø§Ù„Ù…Ø³ØªÙˆÙ‰ Ø§Ù„Ø­Ø§Ù„ÙŠ: <span id="level">1</span></p>
        <p id="timer">Ø§Ù„ÙˆÙ‚Øª Ø§Ù„Ù…ØªØ¨Ù‚ÙŠ: 30 Ø«Ø§Ù†ÙŠØ©</p>
        <p id="question"></p>
        <input type="text" id="answer" placeholder="Ø£Ø¯Ø®Ù„ Ø¥Ø¬Ø§Ø¨ØªÙƒ">
        <button id="checkAnswerButton">ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø©!</button>
    </div>

    <div id="gameOverScreen">
        <h2>Ø§Ù†ØªÙ‡Øª Ø§Ù„Ù„Ø¹Ø¨Ø©!</h2>
        <p>Ù†ØªÙŠØ¬ØªÙƒ: <span id="finalScore">0</span> Ù†Ù‚Ø§Ø·</p>
        <p>Ø£ÙØ¶Ù„ Ù†ØªÙŠØ¬Ø©: <span id="finalBestScore">0</span> Ù†Ù‚Ø§Ø·</p>
        <button id="restartButton">Ø£Ø¹Ø¯ Ø§Ù„Ù„Ø¹Ø¨</button>
        <button id="mainMenuButton">Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</button>
    </div>

    <div id="achievementsScreen">
        <h2>Ø¥Ù†Ø¬Ø§Ø²Ø§ØªÙƒ</h2>
        <ul id="achievementsList"></ul>
        <button id="backButton">Ø±Ø¬ÙˆØ¹</button>
    </div>

    <audio id="correctSound" src="correct.mp3"></audio>
    <audio id="wrongSound" src="wrong.mp3"></audio>
    <audio id="rewardSound" src="reward.mp3"></audio>
    <audio id="backgroundMusic" src="background.mp3" loop></audio> <!-- Ù…ÙˆØ³ÙŠÙ‚Ù‰ Ø§Ù„Ø®Ù„ÙÙŠØ© -->

    <div id="musicControl">ğŸµ</div> <!-- Ø²Ø± Ø§Ù„ØªØ­ÙƒÙ… Ø¨Ø§Ù„Ù…ÙˆØ³ÙŠÙ‚Ù‰ -->

    <script>
        let score = 0;
        let level = 1;
        let timeLeft = 30;
        let timer;
        let rewardEarned = false;

        let bestScore = localStorage.getItem('bestScore') || 0;
        document.getElementById('bestScore').textContent = bestScore;

        let achievements = JSON.parse(localStorage.getItem('achievements')) || [];

        const questions = [
            { question: 'Ù…Ø§ Ù‡Ùˆ Ù„ÙˆÙ† Ø§Ù„Ø³Ù…Ø§Ø¡ØŸ', answer: 'Ø£Ø²Ø±Ù‚' },
            { question: 'ÙƒÙ… ØªØ³Ø§ÙˆÙŠ 2 + 2ØŸ', answer: '4' },
            { question: 'Ù…Ø§ Ù‡ÙŠ Ø¹Ø§ØµÙ…Ø© Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠØ©ØŸ', answer: 'Ø§Ù„Ø±ÙŠØ§Ø¶' },
            { question: 'Ù…Ø§ Ù‡ÙŠ Ø£ÙƒØ¨Ø± Ù‚Ø§Ø±Ø© ÙÙŠ Ø§Ù„Ø¹Ø§Ù„Ù…ØŸ', answer: 'Ø¢Ø³ÙŠØ§' },
            { question: 'Ù…Ø§ Ù‡Ùˆ Ø§Ù„Ø¹Ø¯Ø¯ Ø§Ù„Ø£ÙˆÙ„ÙŠ Ø¨Ø¹Ø¯ 7ØŸ', answer: '11' },
            { question: 'ÙƒÙ… Ø¶Ù„Ø¹ ÙÙŠ Ø§Ù„Ø´ÙƒÙ„ Ø§Ù„Ø³Ø¯Ø§Ø³ÙŠØŸ', answer: '6' }
        ];

        function startGame() {
            document.getElementById('startButton').style.display = 'none';
            document.getElementById('gameArea').style.display = 'block';
            alert("Ø§Ù„Ù„Ø¹Ø¨Ø© Ø¨Ø¯Ø£Øª! Ø§Ø³ØªÙ…ØªØ¹!");
            showQuestion();
            startTimer();
            document.getElementById('backgroundMusic').play(); // ØªØ´ØºÙŠÙ„ Ù…ÙˆØ³ÙŠÙ‚Ù‰ Ø§Ù„Ø®Ù„ÙÙŠØ© Ø¹Ù†Ø¯ Ø¨Ø¯Ø¡ Ø§Ù„Ù„Ø¹Ø¨Ø©
        }

        function startTimer() {
            timer = setInterval(function () {
                timeLeft--;
                document.getElementById('timer').textContent = `Ø§Ù„ÙˆÙ‚Øª Ø§Ù„Ù…ØªØ¨Ù‚ÙŠ: ${timeLeft} Ø«Ø§Ù†ÙŠØ©`;
                if (timeLeft <= 0) {
                    clearInterval(timer);
                    endGame();
                }
            }, 1000);
        }

        function endGame() {
            document.getElementById('gameArea').style.display = 'none';
            document.getElementById('gameOverScreen').style.display = 'block';
            document.getElementById('finalScore').textContent = score;
            updateBestScore();
            document.getElementById('finalBestScore').textContent = bestScore;
            checkAchievements();
            document.getElementById('backgroundMusic').pause(); // Ø¥ÙŠÙ‚Ø§Ù Ø§Ù„Ù…ÙˆØ³ÙŠÙ‚Ù‰ Ø¹Ù†Ø¯ Ø§Ù†ØªÙ‡Ø§Ø¡ Ø§Ù„Ù„Ø¹Ø¨Ø©
        }

        document.getElementById('startButton').addEventListener('click', startGame);

        document.getElementById('achievementsButton').addEventListener('click', function() {
            showAchievements();
        });

        document.getElementById('backButton').addEventListener('click', function() {
            document.getElementById('achievementsScreen').style.display = 'none';
            document.getElementById('startButton').style.display = 'block';
        });

        document.getElementById('restartButton').addEventListener('click', function() {
            document.getElementById('gameOverScreen').style.display = 'none';
            startGame();
        });

        document.getElementById('mainMenuButton').addEventListener('click', function() {
            document.getElementById('gameOverScreen').style.display = 'none';
            document.getElementById('startButton').style.display = 'block';
        });

        function showQuestion() {
            const randomIndex = Math.floor(Math.random() * questions.length);
            const currentQuestion = questions[randomIndex];
            document.getElementById('question').textContent = currentQuestion.question;
            document.getElementById('checkAnswerButton').onclick = function() {
                checkAnswer(currentQuestion.answer);
            };
        }

        function checkAnswer(correctAnswer) {
            const userAnswer = document.getElementById('answer').value.trim();
            const gameArea = document.getElementById('gameArea');
            if (userAnswer === correctAnswer) {
                score++;
                document.getElementById('correctSound').play();
                gameArea.classList.add('correct');
                setTimeout(() => gameArea.classList.remove('correct'), 500);
                document.getElementById('score').textContent = score;
                checkForRewards();
                if (score % 3 === 0) {
                    levelUp();
                }
                alert('Ø¥Ø¬Ø§Ø¨Ø© ØµØ­ÙŠØ­Ø©! +1 Ù†Ù‚Ø·Ø©');
            } else {
                document.getElementById('wrongSound').play();
                gameArea.classList.add('wrong');
                setTimeout(() => gameArea.classList.remove('wrong'), 500);
                alert('Ø¥Ø¬Ø§Ø¨Ø© Ø®Ø§Ø·Ø¦Ø©ØŒ Ø­Ø§ÙˆÙ„ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰!');
            }
            document.getElementById('answer').value = '';
            showQuestion();
        }

        function levelUp() {
            level++;
            document.getElementById('level').textContent = level;
            timeLeft -= 5;
            alert(`Ø±Ø§Ø¦Ø¹! Ø§Ù†ØªÙ‚Ù„Øª Ø¥Ù„Ù‰ Ø§Ù„Ù…Ø³ØªÙˆÙ‰ ${level}!`);
        }

        function checkForRewards() {
            if (score === 5 && !rewardEarned) {
                rewardEarned = true;
                document.getElementById('rewardSound').play();
                timeLeft += 10;
                alert('Ù…Ø¨Ø±ÙˆÙƒ! Ø­ØµÙ„Øª Ø¹Ù„Ù‰ 10 Ø«ÙˆØ§Ù†ÙŠ Ø¥Ø¶Ø§ÙÙŠØ© ÙƒÙ…ÙƒØ§ÙØ£Ø©!');
            }
        }

        function updateBestScore() {
            if (score > bestScore) {
                bestScore = score;
                localStorage.setItem('bestScore', bestScore);
                document.getElementById('bestScore').textContent = bestScore;
                alert('Ù…Ø¨Ø±ÙˆÙƒ! Ø­Ù‚Ù‚Øª Ø£ÙØ¶Ù„ Ù†ØªÙŠØ¬Ø© Ø¬Ø¯ÙŠØ¯Ø©!');
            }
        }

        function checkAchievements() {
            if (score >= 10 && !achievements.includes('Ø¥Ø¬Ø§Ø¨Ø© 10 Ø£Ø³Ø¦Ù„Ø© ØµØ­ÙŠØ­Ø©')) {
                achievements.push('Ø¥Ø¬Ø§Ø¨Ø© 10 Ø£Ø³Ø¦Ù„Ø© ØµØ­ÙŠØ­Ø©');
                localStorage.setItem('achievements', JSON.stringify(achievements));
                alert('Ø¥Ù†Ø¬Ø§Ø² Ø¬Ø¯ÙŠØ¯: Ø¥Ø¬Ø§Ø¨Ø© 10 Ø£Ø³Ø¦Ù„Ø© ØµØ­ÙŠØ­Ø©!');
            }
            if (level >= 5 && !achievements.includes('Ø§Ù„ÙˆØµÙˆÙ„ Ø¥Ù„Ù‰ Ø§Ù„Ù…Ø³ØªÙˆÙ‰ 5')) {
                achievements.push('Ø§Ù„ÙˆØµÙˆÙ„ Ø¥Ù„Ù‰ Ø§Ù„Ù…Ø³ØªÙˆÙ‰ 5');
                localStorage.setItem('achievements', JSON.stringify(achievements));
                alert('Ø¥Ù†Ø¬Ø§Ø² Ø¬Ø¯ÙŠØ¯: Ø§Ù„ÙˆØµÙˆÙ„ Ø¥Ù„Ù‰ Ø§Ù„Ù…Ø³ØªÙˆÙ‰ 5!');
            }
        }

        function showAchievements() {
            document.getElementById('startButton').style.display = 'none';
            document.getElementById('achievementsScreen').style.display = 'block';
            const achievementsList = document.getElementById('achievementsList');
            achievementsList.innerHTML = '';
            if (achievements.length === 0) {
                achievementsList.innerHTML = '<li>Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¥Ù†Ø¬Ø§Ø²Ø§Øª Ø¨Ø¹Ø¯.</li>';
            } else {
                achievements.forEach(achievement => {
                    const li = document.createElement('li');
                    li.textContent = achievement;
                    achievementsList.appendChild(li);
                });
            }
        }

        // Ø§Ù„ØªØ­ÙƒÙ… ÙÙŠ Ø§Ù„Ù…ÙˆØ³ÙŠÙ‚Ù‰ (ØªØ´ØºÙŠÙ„/Ø¥ÙŠÙ‚Ø§Ù)
        const musicControl = document.getElementById('musicControl');
        const backgroundMusic = document.getElementById('backgroundMusic');
        let isMusicPlaying = true;

        musicControl.addEventListener('click', () => {
            if (isMusicPlaying) {
                backgroundMusic.pause();
                musicControl.textContent = 'ğŸ”‡'; // Ø±Ù…Ø² Ù„Ù„Ø¥ÙŠÙ‚Ø§Ù
            } else {
                backgroundMusic.play();
                musicControl.textContent = 'ğŸµ'; // Ø±Ù…Ø² Ù„Ù„ØªØ´ØºÙŠÙ„
            }
            isMusicPlaying = !isMusicPlaying;
        });
    </script>
</body>
</html>
